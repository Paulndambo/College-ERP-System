<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Department Dashboard | College ERP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Global Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

:root {
    --primary-color: #4361ee;
    --secondary-color: #3f37c9;
    --success-color: #4cc9f0;
    --danger-color: #f72585;
    --warning-color: #f8961e;
    --info-color: #4895ef;
    --light-color: #f8f9fa;
    --dark-color: #212529;
    --gray-color: #6c757d;
    --light-gray: #dee2e6;
    --sidebar-width: 260px;
    --sidebar-collapsed-width: 80px;
    --header-height: 60px;
    --footer-height: 60px;
    --border-radius: 8px;
    --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition-speed: 0.3s;
}

body {
    background-color: #f5f7fa;
    color: var(--dark-color);
    line-height: 1.6;
}

a {
    text-decoration: none;
    color: inherit;
}

ul {
    list-style-type: none;
}

button {
    cursor: pointer;
    border: none;
    outline: none;
    background: none;
}

/* Wrapper */
.wrapper {
    display: flex;
    width: 100%;
    min-height: 100vh;
}

/* Sidebar Styles */
.sidebar {
    width: var(--sidebar-width);
    background: linear-gradient(to bottom, #4361ee, #3a0ca3);
    color: #fff;
    position: fixed;
    left: 0;
    height: 100vh;
    z-index: 1000;
    transition: all var(--transition-speed) ease;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    overflow-y: auto;
}

.sidebar.collapsed {
    width: var(--sidebar-collapsed-width);
}

.sidebar.collapsed .sidebar-header h3,
.sidebar.collapsed .profile-info,
.sidebar.collapsed .sidebar-menu span,
.sidebar.collapsed .sidebar-footer span {
    display: none;
}

.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-logo img {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    object-fit: cover;
}

.sidebar-header h3 {
    font-size: 18px;
    font-weight: 600;
    margin-right: auto;
}

.sidebar-toggle {
    color: #fff;
    font-size: 16px;
    transition: all 0.3s;
}

.sidebar-toggle:hover {
    color: var(--light-gray);
}

.sidebar-profile {
    display: flex;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.profile-img img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.profile-info {
    margin-left: 15px;
}

.profile-info h4 {
    font-size: 16px;
    font-weight: 600;
}

.profile-info p {
    font-size: 12px;
    opacity: 0.8;
}

.sidebar-menu {
    padding: 20px 0;
}

.menu-item {
    position: relative;
}

.menu-item a {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    transition: all 0.3s;
}

.menu-item a:hover {
    background: rgba(255, 255, 255, 0.1);
}

.menu-item.active a {
    background: rgba(255, 255, 255, 0.2);
    border-left: 3px solid #fff;
}

.menu-item i {
    min-width: 25px;
    font-size: 16px;
}

.menu-item span {
    margin-left: 10px;
    font-size: 14px;
}

.sidebar-footer {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px 20px;
    position: absolute;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
}

.sidebar-footer a {
    display: flex;
    align-items: center;
    font-size: 14px;
    opacity: 0.8;
    transition: all 0.3s;
}

.sidebar-footer a:hover {
    opacity: 1;
}

.sidebar-footer i {
    margin-right: 10px;
}

/* Main Content Styles */
.content {
    width: calc(100% - var(--sidebar-width));
    margin-left: var(--sidebar-width);
    transition: all var(--transition-speed) ease;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.content.expanded {
    width: calc(100% - var(--sidebar-collapsed-width));
    margin-left: var(--sidebar-collapsed-width);
}

/* Top Navbar Styles */
.top-navbar {
    height: var(--header-height);
    background-color: #fff;
    padding: 0 20px;
    display: flex;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 900;
}

.search-box {
    position: relative;
    margin-left: 20px;
    display: flex;
    align-items: center;
}

.search-box input {
    padding: 8px 15px 8px 35px;
    border: 1px solid var(--light-gray);
    border-radius: 20px;
    font-size: 14px;
    width: 250px;
    transition: all 0.3s;
}

.search-box input:focus {
    width: 300px;
    border-color: var(--primary-color);
    outline: none;
}

.search-box i {
    position: absolute;
    left: 12px;
    color: var(--gray-color);
}

.navbar-right {
    margin-left: auto;
    display: flex;
    align-items: center;
}

.notifications, .messages {
    position: relative;
    margin-right: 20px;
    cursor: pointer;
}

.notifications i, .messages i {
    font-size: 18px;
    color: var(--dark-color);
}

.badge {
    position: absolute;
    top: -8px;
    right: -10px;
    background-color: var(--danger-color);
    color: #fff;
    font-size: 10px;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.date-time {
    font-size: 14px;
    color: var(--gray-color);
}

/* Dashboard Container */
.dashboard-container {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.dashboard-header h2 {
    font-weight: 600;
    color: var(--dark-color);
}

.action-buttons {
    display: flex;
    gap: 10px;
}

.btn {
    padding: 8px 15px;
    border-radius: var(--border-radius);
    font-size: 14px;
    display: flex;
    align-items: center;
    transition: all 0.3s;
}

.btn i {
    margin-right: 8px;
}

.btn-primary {
    background-color: var(--primary-color);
    color: #fff;
}

.btn-primary:hover {
    background-color: var(--secondary-color);
}

.btn-secondary {
    background-color: var(--light-gray);
    color: var(--dark-color);
}

.btn-secondary:hover {
    background-color: #c8ccd0;
}

.btn-approve {
    background-color: var(--success-color);
    color: #fff;
}

.btn-approve:hover {
    background-color: #3da8c9;
}

.btn-reject {
    background-color: var(--danger-color);
    color: #fff;
}

.btn-reject:hover {
    background-color: #d6236e;
}

/* Stats Cards */
.stats-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-bottom: 25px;
}

.stat-card {
    background-color: #fff;
    border-radius: var(--border-radius);
    padding: 20px;
    display: flex;
    align-items: center;
    box-shadow: var(--box-shadow);
    transition: transform 0.3s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 15px;
}

.stat-card-icon i {
    font-size: 24px;
    color: #fff;
}

.revenue-icon {
    background-color: var(--success-color);
}

.expenses-icon {
    background-color: var(--danger-color);
}

.pending-icon {
    background-color: var(--warning-color);
}

.balance-icon {
    background-color: var(--info-color);
}

.stat-card-info h3 {
    font-size: 14px;
    font-weight: 500;
    color: var(--gray-color);
    margin-bottom: 5px;
}

.stat-value {
    font-size: 22px;
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 5px;
}

.stat-change {
    font-size: 12px;
    display: flex;
    align-items: center;
}

.stat-change i {
    margin-right: 5px;
}

.positive {
    color: #38b000;
}

.negative {
    color: var(--danger-color);
}

/* Charts Container */
.charts-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 25px;
}

.chart-card {
    background-color: #fff;
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: var(--box-shadow);
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.chart-header h3 {
    font-size: 16px;
    font-weight: 500;
}

.chart-filter {
    padding: 5px 10px;
    border: 1px solid var(--light-gray);
    border-radius: 4px;
    font-size: 13px;
    background-color: #fff;
}

.chart-area {
    height: 250px;
    width: 100%;
    background-color: #f9f9f9;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--gray-color);
}

/* Transactions Section */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.section-header h3 {
    font-size: 16px;
    font-weight: 500;
}

.view-all {
    font-size: 14px;
    color: var(--primary-color);
    display: flex;
    align-items: center;
}

.view-all i {
    margin-left: 5px;
    font-size: 12px;
}

.transactions-section {
    background-color: #fff;
    border-radius: var(--border-radius);
    padding: 20px;
    margin-bottom: 25px;
    box-shadow: var(--box-shadow);
}

.table-responsive {
    overflow-x: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
}

.data-table th, .data-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--light-gray);
}

.data-table th {
    font-weight: 500;
    background-color: #f8f9fa;
    color: var(--gray-color);
    font-size: 14px;
}

.data-table td {
    font-size: 14px;
}

.data-table tr:last-child td {
    border-bottom: none;
}

.amount {
    font-weight: 500;
}

.status-pill {
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
}

.completed {
    background-color: rgba(56, 176, 0, 0.15);
    color: #38b000;
}

.pending {
    background-color: rgba(248, 150, 30, 0.15);
    color: var(--warning-color);
}

.failed {
    background-color: rgba(247, 37, 133, 0.15);
    color: var(--danger-color);
}

/* Approvals Section */
.approvals-section {
    background-color: #fff;
    border-radius: var(--border-radius);
    padding: 20px;
    margin-bottom: 25px;
    box-shadow: var(--box-shadow);
}

.approvals-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.approval-card {
    border: 1px solid var(--light-gray);
    border-radius: var(--border-radius);
    overflow: hidden;
}

.approval-header {
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #f8f9fa;
    border-bottom: 1px solid var(--light-gray);
}

.approval-type {
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.expense {
    background-color: rgba(247, 37, 133, 0.15);
    color: var(--danger-color);
}

.refund {
    background-color: rgba(72, 149, 239, 0.15);
    color: var(--info-color);
}

.budget {
    background-color: rgba(76, 201, 240, 0.15);
    color: var(--success-color);
}

.approval-date {
    font-size: 12px;
    color: var(--gray-color);
}

.approval-body {
    padding: 15px;
}

.approval-body h4 {
    font-size: 15px;
    margin-bottom: 5px;
}

.approval-body p {
    font-size: 13px;
    color: var(--gray-color);
    margin-bottom: 10px;
}

.approval-details {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
}

.approval-amount {
    font-weight: 500;
    color: var(--dark-color);
}

.approval-dept {
    font-size: 12px;
    color: var(--gray-color);
}

.approval-actions {
    display: flex;
    border-top: 1px solid var(--light-gray);
}

.approval-actions button {
    flex: 1;
    padding: 10px;
    font-size: 13px;
    font-weight: 500;
    border-radius: 0;
}

/* Footer Styles */
.dashboard-footer {
    height: var(--footer-height);
    background-color: #fff;
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-top: 1px solid var(--light-gray);
    margin-top: auto;
}

.dashboard-footer p {
    font-size: 14px;
    color: var(--gray-color);
}

.footer-links {
    display: flex;
    gap: 20px;
}

.footer-links a {
    font-size: 13px;
    color: var(--gray-color);
    transition: color 0.3s;
}

.footer-links a:hover {
    color: var(--primary-color);
}

/* Responsive Design */
@media (max-width: 1200px) {
    .stats-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .charts-container {
        grid-template-columns: 1fr;
    }
    
    .approvals-container {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 991px) {
    .sidebar {
        width: var(--sidebar-collapsed-width);
        left: -var(--sidebar-collapsed-width);
    }
    
    .sidebar.active {
        left: 0;
    }
    
    .content {
        width: 100%;
        margin-left: 0;
    }
    
    .sidebar-header h3,
    .profile-info,
    .sidebar-menu span,
    .sidebar-footer span {
        display: none;
    }
    
    .chart-area {
        height: 200px;
    }
}

@media (max-width: 768px) {
    .stats-container {
        grid-template-columns: 1fr;
    }
    
    .approvals-container {
        grid-template-columns: 1fr;
    }
    
    .search-box {
        display: none;
    }
    
    .chart-area {
        height: 180px;
    }
    
    .dashboard-footer {
        flex-direction: column;
        padding: 10px 20px;
        gap: 10px;
        height: auto;
    }
}

@media (max-width: 576px) {
    .top-navbar {
        padding: 0 15px;
    }
    
    .dashboard-container {
        padding: 15px;
    }
    
    .action-buttons {
        flex-direction: column;
        gap: 5px;
    }
    
    .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
}
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        {% include "includes/finance_sidebar.html" %}
        
        <!-- Main Content -->
        <div id="content" class="content">
            <!-- Top Navbar -->
            <nav class="top-navbar">
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-box">
                    <input type="text" placeholder="Search...">
                    <i class="fas fa-search"></i>
                </div>
                <div class="navbar-right">
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="badge">5</span>
                    </div>
                    <div class="messages">
                        <i class="fas fa-envelope"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="date-time">
                        <span id="current-date">March 31, 2025</span>
                    </div>
                </div>
            </nav>
            
            <!-- Dashboard Content -->
            {% block content %}
            {% endblock content %}
            
            <!-- Footer -->
            <footer class="dashboard-footer">
                <p>&copy; 2025 College ERP System. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Contact Support</a>
                </div>
            </footer>
        </div>
    </div>
    
    <script>
        // DOM Elements
const sidebar = document.getElementById('sidebar');
const content = document.getElementById('content');
const sidebarToggle = document.getElementById('sidebar-toggle');
const sidebarClose = document.getElementById('sidebar-close');
const currentDateElement = document.getElementById('current-date');
const revenueExpensesChart = document.getElementById('revenue-expenses-chart');
const feeCollectionChart = document.getElementById('fee-collection-chart');
const revenueTimeFilter = document.getElementById('revenue-time-filter');
const collectionDepartmentFilter = document.getElementById('collection-department-filter');

// Initialize Dashboard
document.addEventListener('DOMContentLoaded', function() {
    initializeDashboard();
    initializeCharts();
    setupEventListeners();
});

// Dashboard Initialization
function initializeDashboard() {
    // Set current date
    updateCurrentDate();
    
    // Check for saved sidebar state
    const sidebarState = localStorage.getItem('sidebarCollapsed');
    if (sidebarState === 'true') {
        toggleSidebar();
    }
    
    // Handle mobile view
    if (window.innerWidth < 991) {
        sidebar.classList.remove('active');
        content.classList.add('expanded');
    }
}

// Set up event listeners
function setupEventListeners() {
    // Sidebar toggle events
    sidebarToggle.addEventListener('click', function() {
        sidebar.classList.add('active');
    });
    
    sidebarClose.addEventListener('click', function() {
        toggleSidebar();
    });
    
    // Menu item click event
    const menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach(item => {
        item.addEventListener('click', function() {
            menuItems.forEach(i => i.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    // Chart filter change events
    revenueTimeFilter.addEventListener('change', updateRevenueExpensesChart);
    collectionDepartmentFilter.addEventListener('change', updateFeeCollectionChart);
    
    // Approval action buttons
    const approveButtons = document.querySelectorAll('.btn-approve');
    const rejectButtons = document.querySelectorAll('.btn-reject');
    
    approveButtons.forEach(button => {
        button.addEventListener('click', function() {
            handleApprovalAction(this, 'approve');
        });
    });
    
    rejectButtons.forEach(button => {
        button.addEventListener('click', function() {
            handleApprovalAction(this, 'reject');
        });
    });
    
    // Window resize event for responsive behavior
    window.addEventListener('resize', handleResize);
}

// Toggle sidebar collapsed state
function toggleSidebar() {
    sidebar.classList.toggle('collapsed');
    content.classList.toggle('expanded');
    localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
}

// Update current date display
function updateCurrentDate() {
    const now = new Date();
    const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
    currentDateElement.textContent = now.toLocaleDateString('en-US', options);
}

// Handle window resize
function handleResize() {
    if (window.innerWidth < 991) {
        sidebar.classList.add('collapsed');
        content.classList.add('expanded');
        
        if (sidebar.classList.contains('active')) {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = 'auto';
        }
    } else {
        document.body.style.overflow = 'auto';
    }
}

// Initialize charts placeholder functionality
function initializeCharts() {
    // This is where we would normally initialize real charts
    // For now, we'll use placeholder text
    initRevenueExpensesChart();
    initFeeCollectionChart();
}

// Sample data for revenue and expenses chart
const revenueExpensesData = {
    yearly: {
        labels: ['2020', '2021', '2022', '2023', '2024', '2025'],
        revenue: [875000, 940000, 1025000, 1100000, 1220000, 1285000],
        expenses: [720000, 790000, 830000, 845000, 860000, 876400]
    },
    monthly: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        revenue: [98000, 102000, 107000, 105000, 109000, 112000, 115000, 113000, 116000, 119000, 122000, 125000],
        expenses: [72000, 74000, 73000, 75000, 78000, 77000, 76000, 79000, 80000, 82000, 83000, 85000]
    },
    weekly: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
        revenue: [28000, 29500, 31000, 28500],
        expenses: [19000, 20500, 21000, 18500]
    }
};

// Sample data for fee collection rate chart
const feeCollectionData = {
    all: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        data: [82, 86, 88, 84, 89, 91]
    },
    engineering: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        data: [85, 88, 90, 87, 92, 94]
    },
    arts: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        data: [78, 80, 83, 79, 85, 86]
    },
    business: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        data: [84, 87, 89, 86, 90, 92]
    },
    medicine: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        data: [88, 90, 92, 89, 93, 95]
    }
};

// Initialize the revenue and expenses chart
function initRevenueExpensesChart() {
    if (!revenueExpensesChart) return;
    
    const ctx = document.createElement('canvas');
    ctx.id = 'revenue-expenses-canvas';
    ctx.width = revenueExpensesChart.clientWidth;
    ctx.height = revenueExpensesChart.clientHeight;
    revenueExpensesChart.innerHTML = '';
    revenueExpensesChart.appendChild(ctx);
    
    // In a real implementation, this would use Chart.js or similar library
    // For now, just displaying placeholder text
    if (!window.Chart) {
        const placeholder = document.createElement('div');
        placeholder.textContent = 'Revenue & Expenses Chart (Monthly)';
        placeholder.style.color = '#6c757d';
        placeholder.style.textAlign = 'center';
        placeholder.style.paddingTop = '100px';
        revenueExpensesChart.innerHTML = '';
        revenueExpensesChart.appendChild(placeholder);
        
        // Add a visual representation using divs
        createVisualChart(revenueExpensesChart, revenueExpensesData.monthly);
    }
}

// Initialize the fee collection rate chart
function initFeeCollectionChart() {
    if (!feeCollectionChart) return;
    
    const ctx = document.createElement('canvas');
    ctx.id = 'fee-collection-canvas';
    ctx.width = feeCollectionChart.clientWidth;
    ctx.height = feeCollectionChart.clientHeight;
    feeCollectionChart.innerHTML = '';
    feeCollectionChart.appendChild(ctx);
    
    // In a real implementation, this would use Chart.js or similar library
    // For now, just displaying placeholder text
    if (!window.Chart) {
        const placeholder = document.createElement('div');
        placeholder.textContent = 'Fee Collection Rate Chart (All Departments)';
        placeholder.style.color = '#6c757d';
        placeholder.style.textAlign = 'center';
        placeholder.style.paddingTop = '100px';
        feeCollectionChart.innerHTML = '';
        feeCollectionChart.appendChild(placeholder);
        
        // Add a visual representation using divs
        createBarChart(feeCollectionChart, feeCollectionData.all);
    }
}

// Update revenue and expenses chart based on selected time filter
function updateRevenueExpensesChart() {
    const timeFrame = revenueTimeFilter.value;
    const data = revenueExpensesData[timeFrame];
    
    // In a real implementation, this would update the Chart.js chart
    // For now, just updating the placeholder text
    if (!window.Chart) {
        const placeholder = document.createElement('div');
        placeholder.textContent = `Revenue & Expenses Chart (${timeFrame.charAt(0).toUpperCase() + timeFrame.slice(1)})`;
        placeholder.style.color = '#6c757d';
        placeholder.style.textAlign = 'center';
        placeholder.style.paddingTop = '100px';
        revenueExpensesChart.innerHTML = '';
        revenueExpensesChart.appendChild(placeholder);
        
        // Add a visual representation using divs
        createVisualChart(revenueExpensesChart, data);
    }
}

// Update fee collection rate chart based on selected department filter
function updateFeeCollectionChart() {
    const department = collectionDepartmentFilter.value;
    const data = feeCollectionData[department];
    
    // In a real implementation, this would update the Chart.js chart
    // For now, just updating the placeholder text
    if (!window.Chart) {
        const placeholder = document.createElement('div');
        const deptName = department === 'all' ? 'All Departments' : 
                        department.charAt(0).toUpperCase() + department.slice(1);
        placeholder.textContent = `Fee Collection Rate Chart (${deptName})`;
        placeholder.style.color = '#6c757d';
        placeholder.style.textAlign = 'center';
        placeholder.style.paddingTop = '100px';
        feeCollectionChart.innerHTML = '';
        feeCollectionChart.appendChild(placeholder);
        
        // Add a visual representation using divs
        createBarChart(feeCollectionChart, data);
    }
}

// Create a simple visual chart representation using divs
function createVisualChart(container, data) {
    const chartContainer = document.createElement('div');
    chartContainer.style.display = 'flex';
    chartContainer.style.height = '180px';
    chartContainer.style.alignItems = 'flex-end';
    chartContainer.style.justifyContent = 'space-around';
    chartContainer.style.padding = '10px';
    chartContainer.style.marginTop = '20px';
    
    // Find the max value for scaling
    const maxValue = Math.max(...data.revenue, ...data.expenses);
    
    for (let i = 0; i < data.labels.length; i++) {
        const barGroup = document.createElement('div');
        barGroup.style.display = 'flex';
        barGroup.style.flexDirection = 'column';
        barGroup.style.alignItems = 'center';
        barGroup.style.width = `${100 / data.labels.length}%`;
        
        // Revenue bar
        const revenueBar = document.createElement('div');
        const revenueHeight = (data.revenue[i] / maxValue) * 150;
        revenueBar.style.height = `${revenueHeight}px`;
        revenueBar.style.width = '12px';
        revenueBar.style.backgroundColor = '#4361ee';
        revenueBar.style.marginRight = '4px';
        revenueBar.style.position = 'relative';
        revenueBar.title = `Revenue: $${data.revenue[i].toLocaleString()}`;
        
        // Expenses bar
        const expensesBar = document.createElement('div');
        const expensesHeight = (data.expenses[i] / maxValue) * 150;
        expensesBar.style.height = `${expensesHeight}px`;
        expensesBar.style.width = '12px';
        expensesBar.style.backgroundColor = '#f72585';
        expensesBar.style.position = 'relative';
        expensesBar.title = `Expenses: $${data.expenses[i].toLocaleString()}`;
        
        // Bars container
        const barsContainer = document.createElement('div');
        barsContainer.style.display = 'flex';
        barsContainer.style.height = '150px';
        barsContainer.style.alignItems = 'flex-end';
        barsContainer.appendChild(revenueBar);
        barsContainer.appendChild(expensesBar);
        
        // Label
        const label = document.createElement('div');
        label.textContent = data.labels[i];
        label.style.fontSize = '10px';
        label.style.marginTop = '5px';
        label.style.textAlign = 'center';
        
        barGroup.appendChild(barsContainer);
        barGroup.appendChild(label);
        chartContainer.appendChild(barGroup);
    }
    
    // Legend
    const legend = document.createElement('div');
    legend.style.display = 'flex';
    legend.style.justifyContent = 'center';
    legend.style.marginTop = '10px';
    
    const revenueLegend = document.createElement('div');
    revenueLegend.style.display = 'flex';
    revenueLegend.style.alignItems = 'center';
    revenueLegend.style.marginRight = '20px';
    
    const revenueDot = document.createElement('div');
    revenueDot.style.width = '10px';
    revenueDot.style.height = '10px';
    revenueDot.style.backgroundColor = '#4361ee';
    revenueDot.style.marginRight = '5px';
    
    const revenueText = document.createElement('span');
    revenueText.textContent = 'Revenue';
    revenueText.style.fontSize = '12px';
    
    revenueLegend.appendChild(revenueDot);
    revenueLegend.appendChild(revenueText);
    
    const expensesLegend = document.createElement('div');
    expensesLegend.style.display = 'flex';
    expensesLegend.style.alignItems = 'center';
    
    const expensesDot = document.createElement('div');
    expensesDot.style.width = '10px';
    expensesDot.style.height = '10px';
    expensesDot.style.backgroundColor = '#f72585';
    expensesDot.style.marginRight = '5px';
    
    const expensesText = document.createElement('span');
    expensesText.textContent = 'Expenses';
    expensesText.style.fontSize = '12px';
    
    expensesLegend.appendChild(expensesDot);
    expensesLegend.appendChild(expensesText);
    
    legend.appendChild(revenueLegend);
    legend.appendChild(expensesLegend);
    
    container.appendChild(chartContainer);
    container.appendChild(legend);
}

// Create a simple bar chart for fee collection data
function createBarChart(container, data) {
    const chartContainer = document.createElement('div');
    chartContainer.style.display = 'flex';
    chartContainer.style.height = '180px';
    chartContainer.style.alignItems = 'flex-end';
    chartContainer.style.justifyContent = 'space-around';
    chartContainer.style.padding = '10px';
    chartContainer.style.marginTop = '20px';
    
    // Find the max value for scaling
    const maxValue = Math.max(...data.data);
    
    for (let i = 0; i < data.labels.length; i++) {
        const barGroup = document.createElement('div');
        barGroup.style.display = 'flex';
        barGroup.style.flexDirection = 'column';
        barGroup.style.alignItems = 'center';
        barGroup.style.width = `${90 / data.labels.length}%`;
        
        // Bar
        const bar = document.createElement('div');
        const barHeight = (data.data[i] / 100) * 150;
        bar.style.height = `${barHeight}px`;
        bar.style.width = '30px';
        bar.style.backgroundColor = '#4cc9f0';
        bar.style.position = 'relative';
        bar.title = `${data.data[i]}% Collection Rate`;
        
        // Value
        const value = document.createElement('div');
        value.textContent = `${data.data[i]}%`;
        value.style.position = 'absolute';
        value.style.top = '-20px';
        value.style.left = '0';
        value.style.right = '0';
        value.style.textAlign = 'center';
        value.style.fontSize = '10px';
        bar.appendChild(value);
        
        // Label
        const label = document.createElement('div');
        label.textContent = data.labels[i];
        label.style.fontSize = '10px';
        label.style.marginTop = '5px';
        label.style.textAlign = 'center';
        
        barGroup.appendChild(bar);
        barGroup.appendChild(label);
        chartContainer.appendChild(barGroup);
    }
    
    container.appendChild(chartContainer);
}

// Handle approval actions (approve/reject)
function handleApprovalAction(button, action) {
    const approvalCard = button.closest('.approval-card');
    const approvalTitle = approvalCard.querySelector('h4').textContent;
    
    // Create notification
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.position = 'fixed';
    notification.style.bottom = '20px';
    notification.style.right = '20px';
    notification.style.padding = '15px 20px';
    notification.style.backgroundColor = action === 'approve' ? '#38b000' : '#f72585';
    notification.style.color = '#fff';
    notification.style.borderRadius = '4px';
    notification.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
    notification.style.zIndex = '9999';
    notification.style.transition = 'all 0.3s ease';
    
    notification.textContent = `${approvalTitle} has been ${action === 'approve' ? 'approved' : 'rejected'}.`;
    
    document.body.appendChild(notification);
    
    // Fade out and remove the approval card
    approvalCard.style.transition = 'all 0.5s ease';
    approvalCard.style.opacity = '0';
    approvalCard.style.transform = 'scale(0.8)';
    
    setTimeout(() => {
        approvalCard.remove();
        
        // Check if there are no more approval cards
        const remainingCards = document.querySelectorAll('.approval-card');
        if (remainingCards.length === 0) {
            const approvalContainer = document.querySelector('.approvals-container');
            const emptyMessage = document.createElement('div');
            emptyMessage.textContent = 'No pending approvals at this time.';
            emptyMessage.style.padding = '20px';
            emptyMessage.style.textAlign = 'center';
            emptyMessage.style.color = '#6c757d';
            approvalContainer.appendChild(emptyMessage);
        }
    }, 500);
    
    // Remove notification after 3 seconds
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(20px)';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}
    </script>
</body>
</html>