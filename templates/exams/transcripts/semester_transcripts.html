{% extends "base.html" %}

{% block additional_css %}
<style>
  /* Ensure each semester page has a page break when printing */
  .page {
    page-break-after: always;
  }
  .page:last-of-type {
    page-break-after: auto;
  }
</style>
{% endblock additional_css %}

{% block content %}

{% for student in students %}
<div class="page">
  <div class="text-center mb-4">
    <h2>Eastern University of Science & Technology</h2>
    <p><strong>Academic Year Transcript</strong></p>
  </div>
  
  <!-- Student Information -->
  <div class="row mb-4">
    <div class="col-sm-8 col-md-8">
      <p><strong>Student Name:</strong> {{student.user.name}}</p>
      <p><strong>Registration Number:</strong> {{student.registration_number}}</p>
      <p><strong>Program:</strong> Bachelor of Science in Computer Science</p>
    </div>
    <div class="col-sm-4 col-md-4 text-end">
      <p><strong>Semester:</strong> Fall 2023</p>
      <p><strong>University ID:</strong> U123456</p>
      <p><strong>Advisor:</strong> Dr. Jane Smith</p>
    </div>
  </div>

  <!-- Courses Table for Semester 1 -->
  <div class="table-responsive">
    <table class="table table-sm table-bordered table-hover">
      <thead class="">
        <tr>
          <th scope="col">Course Code</th>
          <th scope="col">Course Title</th>
          <th scope="col">Credits</th>
          <th scope="col">Marks</th>
          <th scope="col">Grade</th>
          <th scope="col">GPA Points</th>
        </tr>
      </thead>
      <tbody>
        {% for mark in student.studentmarks.all %}
        {% if mark.semester.id == semester_id %}
          <tr>
            <td>{{mark.course.course_code}}</td>
            <td>{{mark.course}}</td>
            <td>3</td>
            <td>{{mark.total_marks}}</td>
            <td>{{mark.grade}}</td>
            <td>4.0</td>
          </tr>
        {% endif %}
          {% endfor %}
        </tbody>
      <tfoot>
        <tr>
          <th colspan="2" class="text-end">Total Credits</th>
          <th>15</th>
          <th colspan="2"></th>
        </tr>
        <tr>
          <th colspan="2" class="text-end">GPA</th>
          <th colspan="3">3.6</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="mt-5">
    <p><strong>Notes:</strong> This transcript is generated by the University system and is official.</p>
    <p class="text-end mt-4"><strong>Registrar's Signature: ________________________</strong></p>
  </div>
</div>
{% endfor %}

{% endblock content %}