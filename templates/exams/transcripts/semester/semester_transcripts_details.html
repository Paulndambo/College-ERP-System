{% extends "exams/transcripts/base.html" %}
{% load static %}

{% block content %}

{% for student in students %}
<div class="page">
    {% include "includes/school_details.html" %}
  
  <!-- Student Information -->
  <div class="row mb-4 header-text">
    <div class="col-7">
        <p style="margin: 0;"><strong>STUDENT NAME:</strong> {{student.user.name}}</p>
        <p style="margin: 0;"><strong>PROGRAMME:</strong> {{student.programme}}</p>
        <p style="margin: 0;"><strong>DEPARTMENT:</strong> {{student.programme.department}}</p>
        <p><strong>FACULTY:</strong> {{student.programme.school}}</p>
      </div>
      <div class="col-5">
        <p style="margin: 0;"><strong>REG. NUMBER:</strong> {{student.registration_number}}</p>
        <p style="margin: 0;"><strong>SEMESTER:</strong> {{semester.name}}</p>
        <p style="margin: 0;"><strong>ACADEMIC YEAR:</strong> {{semester.academic_year}}</p>
        <p><strong>YEAR OF STUDY:</strong> FOURTH YEAR</p>
      </div>
  </div>

  <!-- Courses Table for Semester 1 -->
  <div class="table-responsive">
    <table class="table table-sm table-bordered table-hover">
      <thead class="">
        <tr>
          <th scope="col">Course Code</th>
          <th scope="col">Course Title</th>
          <th scope="col">Credits</th>
          <th scope="col">Marks</th>
          <th scope="col">Grade</th>
          <th scope="col">GPA Points</th>
        </tr>
      </thead>
      <tbody>
        {% for mark in student.studentmarks.all %}
        {% if mark.semester.id == semester_id %}
          <tr>
            <td>{{mark.course.course_code}}</td>
            <td>{{mark.course}}</td>
            <td>3</td>
            <td>{{mark.total_marks}}</td>
            <td>{{mark.grade}}</td>
            <td>4.0</td>
          </tr>
        {% endif %}
          {% endfor %}
        </tbody>
      <tfoot>
        <tr>
          <th colspan="2" class="text-end">Total Credits</th>
          <th>15</th>
          <th colspan="2"></th>
        </tr>
        <tr>
          <th colspan="2" class="text-end">GPA</th>
          <th colspan="3">3.6</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="mt-5">
    <p><strong>Notes:</strong> This transcript is generated by the University system and is official.</p>
    <p class="text-end mt-4"><strong>Registrar's Signature: ________________________</strong></p>
  </div>
</div>
{% endfor %}

{% endblock content %}